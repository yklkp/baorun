window.baidu=window.baidu||{version:"1-0-0",emptyFn:function(){}};window.onerror=function(){};baidu.isString=function(a){return typeof a=="object"&&a&&a.constructor==String||typeof a=="string"};baidu.G=function(){for(var c=[],b=arguments.length-1;b>-1;b--){var a=arguments[b];c[b]=null;if(typeof a=="object"&&a&&a.dom){c[b]=a.dom}else{if(typeof a=="object"&&a&&a.tagName||a==window||a==document){c[b]=a}else{if(baidu.isString(a)&&(a=document.getElementById(a))){c[b]=a}}}}return c.length<2?c[0]:c};var Fe=Fe||{version:"20080809",emptyFn:function(){}};(function(){Fe._log=[];var a=0,c={};Fe.BaseClass=function(b){c[this.hashCode=b||Fe.BaseClass.guid()]=this};Fe.BaseClass.guid=function(){return"mz_"+(a++).toString(36)};Fe.BaseClass.create=function(){var b=new Fe.BaseClass;b.decontrol();return b};window.Instance=Fe.instance=Fe.I=function(b){return c[b]};Fe.BaseClass.prototype.dispose=function(){this.hashCode&&delete c[this.hashCode];for(var b in this){typeof this[b]!="function"&&delete this[b]}};Fe.BaseClass.prototype.getHashCode=function(){if(!this.hashCode){c[this.hashCode=Fe.BaseClass.guid()]=this}return this.hashCode};Fe.BaseClass.prototype.decontrol=function(){delete c[this.hashCode]};Fe.BaseClass.prototype.toString=function(){return"[object "+(this._className||"Object")+"]"};Fe.BaseClass.prototype._wlog=function(b,d){var e=Fe._log;if(e.length>100){e.reverse().length=50;e.reverse()}e[e.length]="["+b+"]["+(this._className||"Object")+" "+this.hashCode+"] "+d}})();Function.prototype.inherits=function(c,e){var d,f,a=this.prototype,b=function(){};b.prototype=c.prototype;f=this.prototype=new b;if(typeof e=="string"){f._className=e}for(d in a){f[d]=a[d]}this.prototype.constructor=a.constructor;a=b=null;return f};Fe.extend=function(b,d){if(b&&d&&typeof d=="object"){for(var c in d){b[c]=d[c]}c=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];for(var e=0,a;e<c.length;e++){a=c[e];if(Object.prototype.hasOwnProperty.call(d,a)){b[a]=d[a]}}}return b};Fe.on=function(c,b,a){if(!(c=baidu.G(c))){return c}b=b.replace(/^on/,"").toLowerCase();if(c.attachEvent){c[b+a]=function(){a.call(c,window.event)};c.attachEvent("on"+b,c[b+a])}else{c.addEventListener(b,a,false)}return c};Fe.un=function(c,b,a){if(!(c=baidu.G(c))){return c}b=b.replace(/^on/,"").toLowerCase();if(c.attachEvent){c.detachEvent("on"+b,c[b+a]);c[b+a]=null}else{c.removeEventListener(b,a,false)}return c};var mapConfig={map:{key:"67bd734bd2ef5e5ccecfeccbb5a221ee",id:"MapContent",center:{x:116.395645,y:39.929986},city:"\u5317\u4eac\u5e02",level:12,width:697,height:550,minWidth:100,minHeight:100,maxWidth:697,maxHeight:550},event:{dra:1,scr:1,dou:1,key:1},control:{nav:{self:1,style:"LARGE",place:"TOP_LEFT"},ove:{self:1,style:1,place:"BOTTOM_RIGHT"},sca:{self:1,style:"METRIC",place:"BOTTOM_LEFT"}}},userConfig={map:{key:"",id:mapConfig.map.id,center:mapConfig.map.center,city:mapConfig.map.city,level:mapConfig.map.level,width:mapConfig.map.width,height:mapConfig.map.height,minWidth:mapConfig.map.minWidth,minHeight:mapConfig.map.minHeight,maxWidth:mapConfig.map.maxWidth,maxHeight:mapConfig.map.maxHeight},event:{dra:mapConfig.event.dra,scr:mapConfig.event.scr,dou:mapConfig.event.dou,key:mapConfig.event.key},control:{nav:{self:mapConfig.control.nav.self,style:mapConfig.control.nav.style,place:mapConfig.control.nav.place},ove:{self:mapConfig.control.ove.self,style:mapConfig.control.ove.style,place:mapConfig.control.ove.place},sca:{self:mapConfig.control.sca.self,style:mapConfig.control.sca.style,place:mapConfig.control.sca.place}}},temp={map:{},control:{nav:new BMap.NavigationControl,ove:new BMap.OverviewMapControl,sca:new BMap.ScaleControl}},userCcof=userConfig.control;function doLoad(){initMap();initMapSize();initMapControl();initMapEvent();hidInputOverline();bindEvent()}function initMap(){var c=userConfig.map,b=new BMap.Map("MapContent"),a=new BMap.Point(c.center.x,c.center.y);b.centerAndZoom(a,c.level);setCurrentCityName(c.city);window.map=b;showMapPointAndLevel()}function showMapPointAndLevel(){var a=userConfig.map;baidu.G("mapCenterPointX").value=a.center.x;baidu.G("mapCenterPointY").value=a.center.y;baidu.G("mapCenterLevel").value=a.level}function initMapSize(){var c=userConfig.map,b=c.width,a=c.height;baidu.G(c.id).style.width=b+"px";baidu.G(c.id).style.height=a+"px";baidu.G("map_width").value=b;baidu.G("map_height").value=a}function initMapControl(){var h=userConfig.control,a=temp.control,j;for(j in a){map.addControl(a[j])}for(j in h){var b=baidu.G("control_"+j),c=baidu.G(j+"_style_"+h[j].style),d=baidu.G(j+"_place_"+h[j].place),f=window["BMAP_NAVIGATION_CONTROL_"+h[j].style],e=window["BMAP_ANCHOR_"+h[j].place];if(h[j].self==1){a[j].setType&&a[j].setType(f);a[j].setAnchor&&a[j].setAnchor(e);a[j].changeView&&h[j].style==1&&!a[j].isOpen()&&a[j].changeView();b=[b,c,d];for(j=0;j<b.length;j++){if(b[j]){b[j].checked="checked"}}}else{a[j].hide();if(b){b.checked=""}}}}function initMapEvent(){var a=userConfig.event,c;for(c in a){var b=baidu.G("event_"+c),d=a[c]?"enable":"disable";b.checked=b&&a[c]==1?"checked":"";map[d+b.value]()}}function editCurrentCity(){baidu.G("CurrentCityCon").style.display="none";baidu.G("CurrentCityEdit").style.display="";baidu.G("CurrentCityInput").value="\u8bf7\u8f93\u5165\u57ce\u5e02\u540d\u79f0";baidu.G("CurrentCityInput").onfocus();baidu.G("CurrentCityInput").focus()}function updateCurrentCity(){var a=baidu.G("CurrentCityInput").value;a.replace(/^\s*|\s*$/g,"");if(!a||a=="\u8bf7\u8f93\u5165\u57ce\u5e02\u540d\u79f0"){baidu.G("cityNameTip").style.display="block";baidu.G("cityNameTip").innerHTML="\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u4e2d\u6587\u57ce\u5e02\u540d\u79f0"}else{getCityPoint(a);baidu.G("CurrentCityCon").style.display="";baidu.G("CurrentCityEdit").style.display="none";baidu.G("cityNameTip").style.display="none"}}function canelCurrentCity(){baidu.G("CurrentCityCon").style.display="";baidu.G("CurrentCityEdit").style.display="none";baidu.G("cityNameTip").style.display="none"}function setCurrentCity(c){if(c.content.error==0){editCurrentCity();setTimeout(function(){baidu.G("cityNameTip").style.display="block";baidu.G("cityNameTip").innerHTML="\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u4e2d\u6587\u57ce\u5e02\u540d\u79f0"},0)}else{setCurrentCityName(c.content.cname);var b=c.content.geo.split("|")[2].split(";")[0].split(",")[0],a=c.content.geo.split("|")[2].split(";")[0].split(",")[1];b=map.mercatorToLnglat(b,a);c.content.cname=="\u5168\u56fd"?map.centerAndZoom(new BMap.Point(b[0],b[1]),5):map.centerAndZoom(new BMap.Point(b[0],b[1]),c.content.level)}}function setCurrentCityName(a){userConfig.map.city=a;baidu.G("cityName").innerHTML=a}function getCityPoint(a){a=encodeURIComponent(a);scriptRequest("http://map.baidu.com/?newmap=1&qt=cur&callback=setCurrentCity&ie=utf-8&wd="+a+"&oue=1&res=jc","null")}function getCurrentCityName(){var c=map.getZoom(),b=map.getBounds(),a=map.lnglatToMercator(b.minX,b.minY);b=map.lnglatToMercator(b.maxX,b.maxY);a=a[0]+","+a[1]+";"+b[0]+","+b[1];c<=7?setCurrentCityName("\u5168\u56fd"):scriptRequest("http://map.baidu.com/?newmap=1&qt=cen&b="+a+"&l="+c,function(){typeof _mapCenter!="undefined"&&_mapCenter.content&&_mapCenter.content.name&&setCurrentCityName(_mapCenter.content.name)})}function getlikeArea(){if(typeof l_search=="undefined"){l_option={onSearchComplete:function(c){if(l_search.getStatus()==BMAP_STATUS_SUCCESS){var b=l_search._json.content.level||17,d=0;if(l_search._json.content.length){d=l_search._json.content.length-c.getCurrentNumPois();var e="";d=l_search._json.content[d].cla;for(var f=0;f<d.length;f++){e+=d[f].splice(",")[1]+","}if(/\u533a\u53bf/g.test(e)){b=14}}c=c.getPoi(0).point;c=new BMap.Point(c.lng,c.lat);map.centerAndZoom(c,b)}}};l_search=new BMap.LocalSearch(map,l_option)}var a=baidu.G("searchMap").value;a.replace(/^\s*|\s*$/g,"")&&l_search.search(a)}function changeMapCenterPoint(a,c){var b=userConfig.map;b.center[c]=a.value;var d=new BMap.Point(b.center.x,b.center.y);map.centerAndZoom(d,b.level)}function changeMapSize(a,c){var b=userConfig.map,d=a.value;if(c=="wid"){if(d<b.minWidth||d>b.maxWidth){d=d<b.minWidth?b.minWidth:b.maxWidth;a.value=d}b.width=d;baidu.G(b.id).style.width=d+"px"}else{if(c=="hei"){if(d<b.minHeight||d>b.maxHeight){d=d<b.minHeight?b.minHeight:b.maxHeight;a.value=d}b.height=d;baidu.G(b.id).style.height=d+"px"}}setTimeout(function(){map.panTo(new BMap.Point(b.center.x,b.center.y),b.level)},200)}function changeMapControl(a){var c=userConfig.control,b=temp.control,d=a.value;if(!a.checked&&b[d].isVisible()){b[d].hide();c[d].self=0}else{b[d].show();document.all&&d=="nav"&&setTimeout(function(){b.nav.setType(window["BMAP_NAVIGATION_CONTROL_"+c.nav.style])},0);c[d].self=1}}function changeNavStyle(b){var d=userConfig.control,c=temp.control,e=b.cl_type||b.getAttribute("cl_type"),a="";if(e=="nav"){a="BMAP_NAVIGATION_CONTROL_"}else{if(e=="sca"){a="BMAP_UNIT_"}}a=window[a+b.value];if(e=="nav"){c[e].setType(a)}else{e=="sca"&&c[e].setUnit(a)}d[e].style=b.value;baidu.G(e+"_style_"+b.value).checked="checked"}function changeOveStyle(c){var b=userConfig.control,a=temp.control;baidu.G("ove_style_"+c.value).checked="checked";if(c.name){if(c.value==1){if(a.ove.isOpen()){return}}else{if(!a.ove.isOpen()){return}}a.ove.changeView()}b.ove.style=c.value}function changeCtrlPlace(a){var c=userConfig.control,b=temp.control,d=a.cl_type||a.getAttribute("cl_type");b[d].setAnchor(window["BMAP_ANCHOR_"+a.value]);c[d].place=a.value;baidu.G(d+"_place_"+a.value).checked="checked"}function changeMapEvent(c){var b=userConfig.event,a=v=-1;if(c.checked){a="enable";v=1}else{a="disable";v=0}if(a){map[a+c.value]();c=c.value.slice(0,3).toLowerCase();b[c]=v}}function bindEvent(){var b=userConfig.map,d=userConfig.control,c=userConfig.event,e=["TOP_LEFT","TOP_RIGHT","BOTTOM_LEFT","BOTTOM_RIGHT"],f=function(){b.center.x=map.getCenter().lng;b.center.y=map.getCenter().lat;b.level=map.getZoom();getCurrentCityName();showMapPointAndLevel()};map.addEventListener("moveend",f);map.addEventListener("zoomend",f);map.addEventListener("load",f);baidu.G("CurrentCityInput").onkeydown=function(g){g=window.event||g;baidu.G("cityNameTip").style.display="none";if(!(g.keyCode!=13&&g.keyCode!=27)){if(g.keyCode==13){updateCurrentCity()}else{g.keyCode==27&&canelCurrentCity()}}};baidu.G("searchMap").onkeydown=function(g){g=window.event||g;g.keyCode==13&&getlikeArea()};temp.control.ove.addEventListener("viewchanging",function(){var g={};g.value=this.isOpen()?1:0;changeOveStyle(g)});for(var j in d){if(f=baidu.G("control_"+j)){f.onclick=function(){changeMapControl(this)}}for(f=0;f<e.length;f++){var a=baidu.G(j+"_place_"+e[f]);if(a){a.onclick=function(){changeCtrlPlace(this)}}}}d=["LARGE","SMALL","PAN","ZOOM"];for(j=0;j<d.length;j++){if(f=baidu.G("nav_style_"+d[j])){f.onclick=function(){changeNavStyle(this)}}}baidu.G("sca_style_METRIC").onclick=baidu.G("sca_style_IMPERIAL").onclick=function(){changeNavStyle(this)};baidu.G("ove_style_0").onclick=baidu.G("ove_style_1").onclick=function(){changeOveStyle(this)};for(j in c){if(f=baidu.G("event_"+j)){f.onclick=function(){changeMapEvent(this)}}}}function hidInputOverline(){for(var c=document.getElementById("wxp_zdydt").getElementsByTagName("input"),b=[],a=0;a<c.length;a++){(c[a].type=="checkbox"||c[a].type=="radio"||c[a].type=="button")&&b.push(c[a])}for(a=0;a<b.length;a++){b[a].onfocus=function(){this.blur()}}}function changeSignNav(c,b,a){stopBubble(a);if(b==1){if(_gl.temp.curSignType=="iw"){return}_gl.temp.curSignType="iw";_gl.temp.curSignNav="Point";us_sign.openPoint()}else{if(b==2){if(_gl.temp.curSignType=="pl"){return}_gl.temp.curSignType="pl";_gl.temp.curSignNav="Polyline";us_sign.openPolyline()}else{if(b==3){if(_gl.temp.curSignType=="lb"){return}_gl.temp.curSignType="lb";_gl.temp.curSignNav="Remark";us_sign.openRemark()}}}if(baidu.G("sign_nav_bg").className!="wxp_nav_bg"+b){baidu.G("sign_nav_bg").className="wxp_nav_bg"+b;for(c=1;c<=3;c++){baidu.G("sign_content_"+c).style.display="none"}baidu.G("sign_content_"+b).style.display="block";_gl.temp.signclickTrue=1}}function input_focus(c,b,a){baidu.G("cityNameTip").style.display="none";a||(a="");c.style.color="#000";c.value!=b||(c.value=a)}function input_blur(c,b,a){c.style.color="#8c8c8c";(c.value==a||c.value.length<=0)&&(c.value=b)}function scriptRequest(a,c,b,d){var e=/msie/i.test(window.navigator.userAgent);if(e&&baidu.G("_script_"+b)){var f=baidu.G("_script_"+b)}else{baidu.G("_script_"+b)&&baidu.G("_script_"+b).parentNode.removeChild(baidu.G("_script_"+b));f=document.createElement("script");if(d!=null){f.charset=d}b!=null&&b!=""&&f.setAttribute("id","_script_"+b);f.setAttribute("type","text/javascript");document.body.appendChild(f)}b=new Date;a+=a.indexOf("?")>-1?"&t="+b.getTime():"?t="+b.getTime();b=function(){if(!f.readyState||f.readyState=="loaded"||f.readyState=="complete"){if(c!="null"){typeof c=="function"?c():eval(c)}}};if(e){f.onreadystatechange=b}else{f.onload=b}f.setAttribute("src",a)}function getScrollTop(){var a=0;if(document.documentElement&&document.documentElement.scrollTop){a=document.documentElement.scrollTop}else{if(document.body){a=document.body.scrollTop}}return a}function getPosition(a){for(var c={left:0,top:0};a&&a.offsetParent;){c.left+=a.offsetLeft;c.top+=a.offsetTop;a=a.offsetParent}return c}function stopBubble(a){a=window.event||a;a.stopPropagation?a.stopPropagation():a.cancelBubble=true}var _gl=null,_sign=function(){};_sign.mapSign={pointInfo:{list:{}},polylineInfo:{list:{}},remarkInfo:{list:{}}};_sign.isNull=function(a){for(var c in a){return 0}return 1};function Sign(){Fe.BaseClass.call(this);_gl.oSign=this;this.tabDom=null;this.followInfo={point:"\u5de6\u952e\u6807\u8bb0\uff0c\u53f3\u952e\u9000\u51fa",polyline:"\u5de6\u952e\u5355\u51fb\u5f00\u59cb\u753b\u7ebf\uff0c\u53cc\u51fb\u7ed3\u675f\u753b\u7ebf\uff0c\u53f3\u952e\u9000\u51fa",remark:"\u5de6\u952e\u6807\u8bb0\uff0c\u53f3\u952e\u9000\u51fa"};this.temp={event:{polyline:[],followTip:[]},polyline:{}};return""}Sign.inherits(Fe.BaseClass,"Sign");Fe.extend(Sign.prototype,{openPoint:function(){if(_gl.config.iw.toal>=_gl.config.iw.lagerT){_gl.showTipInfo("signPointTip","\u60a8\u6700\u591a\u53ef\u521b\u5efa"+_gl.config.iw.lagerT+"\u4e2a\u70b9\u6807\u8bb0");this.exituserSign()}else{this.initMask("transparent.cur,default,curLab",this.openPointFun);this.showFollowTip("point")}},openPointFun:function(c,b){_gl.createMark(c);var a=_gl.config.iw.index-1;addSignList("signPointList",'<li id="iwListCon'+a+'" class="signLihover">\t\t\t\t\t\t<div class="wxp_nav_3"><div id="iwEdit'+a+'" style="display:none;float:right;margin:0;"><span onclick="editSignList(\'iw\','+a+")\">\u7f16\u8f91</span> | <span onclick=\"removeSignList('iw',"+a+')">\u5220\u9664</span></div><b id="iwFormTitle_'+a+'" class="cur_point" onclick="_gl.openInfoWnd(\'\','+a+');">'+_gl.config.iw.title+(a+1)+'</b><span style="color:#f00;cursor:auto;display:none" id="iwSaveTip'+a+'">(\u672a\u4fdd\u5b58)</span></div>\t\t\t\t\t\t<div class="wxp_con_1" id="iwList'+a+'">\t\t\t\t\t\t</div>\t\t\t\t\t</li>',"mapPoint","iw",a);setTimeout(b.exituserSign,1)},openPolyline:function(){var g=this;if(_gl.config.pl.toal>=_gl.config.pl.lagerT){_gl.showTipInfo("signPolyLineTip","\u60a8\u6700\u591a\u53ef\u521b\u5efa"+_gl.config.pl.lagerT+"\u4e2a\u7ebf\u6807\u8bb0");g.exituserSign()}else{var j=g.initMask("circle.cur,crosshair",null);map.closeInfoWindow();this.showFollowTip("polyline");var h=[],k=[],a=[],b,e=0,d=function(l){l=BMap.OperationMask.getDrawPoint(l,true);if(a[a.length-1]!='"'+l.lng+"|"+l.lat+'"'){var i=_gl.config.pl.index;g.temp.drawing=true;g.followTitle.setContent("\u53cc\u51fb\u7ed3\u675f\u753b\u7ebf");h.push(l);k.push(l);a.push('"'+l.lng+"|"+l.lat+'"');if(b){b.setPoints(k)}else{l=_gl.config.pl;var m=null;b=new BMap.Polyline(h,{strokeColor:l.color,strokeWeight:l.weight,strokeOpacity:l.opacity,strokeStyle:l.style});b.addEventListener("click",function(){editSignList("pl",i)});b.addEventListener("mouseover",function(){m=setTimeout(function(){hoverListFrom("pl",i)},300)});b.addEventListener("mouseout",function(){outListFrom("pl",i);clearTimeout(m)});g.temp.polyline.obj=b;g.temp.polyline.closeOk=0;b.addEventListener("lineupdate",function(){if(e){for(var n=[],p=this.getPoints(),o=0;o<p.length;o++){var q=p[o];n.push('"'+q.lng+"|"+q.lat+'"')}_sign.mapSign.polylineInfo.list[i].arr=n}});map.addOverlay(b)}}},c=function(i){i=BMap.OperationMask.getDrawPoint(i,true);if(h.length>0){h[k.length]=i;b.setPoints(h)}},f=function(){if(a.length>1){var l=_gl.config.pl.index,i=l*1+1,m=_gl.config.pl;/chrome\/(\d+\.\d)/i.test(navigator.userAgent)&&b.setPoints(k);e=1;g.temp.polyline.closeOk=1;b.enableEditing();_sign.mapSign.polylineInfo.list[l]={polyobj:b,arr:a,color:m.color,_color:m.color,weight:m.weight,_weight:m.weight,opacity:m.opacity,_opacity:m.opacity,style:m.style,_style:m.style};i='<li id="plListCon'+l+'" class="signLihover">\t\t\t\t\t\t\t<div class="wxp_nav_3"><div id="plEdit'+l+'" style="float:right;margin:0;"><span onclick="editSignList(\'pl\','+l+")\">\u7f16\u8f91</span> | <span onclick=\"removeSignList('pl',"+l+')">\u5220\u9664</span></div><b id="plFormTitle_'+l+"\" onclick=\"gotoBestMap('pl',"+l+')" class="cur_point">\u624b\u7ed8\u8def\u7ebf'+i+'</b><span style="color:#f00;cursor:auto;display:none" id="plSaveTip'+l+'">(\u672a\u4fdd\u5b58)</span></div>\t\t\t\t\t\t\t<div class="wxp_con_1" id="plList'+l+'">\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</li>';_gl.config.pl.index++;_gl.config.pl.toal++;addSignList("signPolylineList",i,"mapPolyline","pl",l)}_gl.temp.pl.index=l;g.temp.drawing=false;_gl.oSign.clearPolylineFun();_gl.oSign.exituserSign()};Fe.on(j,"click",d);Fe.on(j,"mousemove",c);Fe.on(j,"dblclick",f);g.temp.event.polyline.push({elem:j,type:"click",func:d},{elem:j,type:"mousemove",func:c},{elem:j,type:"dblclick",func:f})}},clearPolylineFun:function(){var a=this.temp.event.polyline;if(a&&a.length>0){a=this.temp.event.polyline;for(var c=0;c<a.length;c++){Fe.un(a[c].elem,a[c].type,a[c].func)}}this.temp.polyline.closeOk||map.removeOverlay(this.temp.polyline.obj);this.temp.event.polyline=[]},openRemark:function(){if(_gl.config.lb.toal>=_gl.config.lb.lagerT){_gl.showTipInfo("signRemarkTip","\u60a8\u6700\u591a\u53ef\u521b\u5efa"+_gl.config.lb.lagerT+"\u4e2a\u6587\u5b57\u6807\u8bb0");this.exituserSign()}else{this.initMask(" ,text",this.openRemarkFun);this.showFollowTip("remark")}},openRemarkFun:function(c,b){_gl.createLabel(c);setTimeout(b.exituserSign,1);var a=_gl.config.lb.index-1;addSignList("signRemarkList",'<li id="lbListCon'+a+'" class="signLihover">\t\t\t\t\t\t<div class="wxp_nav_3"><div id="lbEdit'+a+'" style="float:right;margin:0;display:none"><span onclick="editSignList(\'lb\','+a+")\">\u7f16\u8f91</span> | <span onclick=\"removeSignList('lb',"+a+')">\u5220\u9664</span></div><b id="lbFormTitle_'+a+"\" onclick=\"gotoBestMap('lb',"+a+')" class="cur_point">\u6587\u5b57\u5907\u6ce8'+(a+1)+'</b><span style="color:#f00;cursor:auto;display:none" id="lbSaveTip'+a+'">(\u672a\u4fdd\u5b58)</span></div>\t\t\t\t\t\t<div class="wxp_con_1" id="lbList'+a+'">\t\t\t\t\t\t</div>\t\t\t\t\t</li>',"mapRemark","lb",a)},initMask:function(h,a){_gl.oSign.exituserSign();map.closeInfoWindow();var j=h.split(",")[0],b=h.split(",")[1],c=h.split(",")[2]||"";j="images/"+j;if(FeBrowser.chrome||FeBrowser.safari||FeBrowser.opera){j=""}var d=this;BMap.OperationMask.show(map);var f=BMap.OperationMask.getDom(map);BMap.OperationMask.setCursor("url('"+j+"'),"+b);c&&_gl.showCurLab();var e=function(g){g=g||window.event;if(g.button==2&&!d.temp.drawing){setTimeout(d.exituserSign,1);Fe.un(f,"mouseup",e)}};Fe.on(f,"mouseup",e);if(typeof a!="function"){return f}BMap.OperationMask.getDom(map).onclick=function(g){a(g,d)}},exituserSign:function(){var a=BMap.OperationMask.getDom(map);a.style.cursor="pointer";BMap.OperationMask.hide(map);a.onclick=null;_gl.oSign.clearPolylineFun();_gl.exitShowCurLab();_gl.oSign.exitShowFollowTip();_gl.temp.curSignType=""},showFollowTip:function(a){var c=this;c.followShow=false;if(c.followInfo[a]){var b;if(!c.followTitle){b=c.followTitle=new BMap.Label(c.followInfo[a],{offset:new BMap.Size(0,0)})}b=c.followTitle;b.setOffset(new BMap.Size(8,14));a=="point"&&b.setOffset(new BMap.Size(5,5));b.setStyle({color:"#333",borderColor:"#ff0103"});b.setContent(c.followInfo[a]);map.addOverlay(b);b.hide();c.followShow=true;a=function(e){if(c.followShow){e=window.event||e;if((e.target||e.srcElement)!=BMap.OperationMask.getDom(map)){b.hide()}else{b.show();e=BMap.OperationMask.getDrawPoint(e,true);b.setPoint(e);c.followShow=true}}};var d=function(e){e=window.event||e;(e.target||e.srcElement).getAttribute("userTagPanl");BMap.OperationMask.getDom(map)};Fe.on(document,"mousemove",a);Fe.on(document,"click",d);c.temp.event.followTip.push({elem:document,type:"mousemove",func:a},{elem:document,type:"click",func:d})}},exitShowFollowTip:function(){var a=this.temp.event.followTip;this.followTitle&&this.followTitle.hide();if(a&&a.length>0){a=this.temp.event.followTip;for(var c=0;c<a.length;c++){Fe.un(a[c].elem,a[c].type,a[c].func)}}this.temp.event.followTip=[]}});function MapSign(){Fe.BaseClass.call(this);_gl=this;this.oSign=null;this.temp={iw:{change:0,previous:null},pl:{index:0,previous:null,change:0},lb:{index:0,previous:null,change:0},cur:{label:null,index:11},icon:null,curSignType:null,preSignType:null,signclickTrue:0,event:{showCurLab:[]}};this.poiMarker={};this.config={iw:{index:0,toal:0,lagerT:10,title:"\u6211\u7684\u6807\u8bb0",content:"\u6211\u7684\u5907\u6ce8",cityCode:1,fav:0,save:0,show:0},pl:{index:0,toal:0,lagerT:10,color:"#f00",weight:4,opacity:0.6,style:"solid"},lb:{index:0,toal:0,lagerT:10,content:"\u6211\u7684\u6807\u8bb0",label:{}},cur:{11:{_w:12,w:21,h:21,l:0,t:0,x:6,y:21,lb:5},12:{_w:12,w:21,h:21,l:23,t:0,x:6,y:21,lb:5},13:{_w:12,w:21,h:21,l:46,t:0,x:6,y:21,lb:5},14:{_w:12,w:21,h:21,l:69,t:0,x:6,y:21,lb:5},15:{_w:12,w:21,h:21,l:92,t:0,x:6,y:21,lb:5},16:{_w:12,w:21,h:21,l:115,t:0,x:6,y:21,lb:5},21:{_w:19,w:23,h:25,l:0,t:21,x:9,y:25,lb:12},22:{_w:19,w:23,h:25,l:23,t:21,x:9,y:25,lb:12},23:{_w:19,w:23,h:25,l:46,t:21,x:9,y:25,lb:12},24:{_w:19,w:23,h:25,l:69,t:21,x:9,y:25,lb:12},25:{_w:19,w:23,h:25,l:92,t:21,x:9,y:25,lb:12},26:{_w:19,w:23,h:25,l:115,t:21,x:9,y:25,lb:12},31:{_w:17,w:21,h:21,l:0,t:46,x:1,y:21,lb:10},32:{_w:17,w:21,h:21,l:23,t:46,x:1,y:21,lb:10},33:{_w:17,w:21,h:21,l:46,t:46,x:1,y:21,lb:10},34:{_w:17,w:21,h:21,l:69,t:46,x:1,y:21,lb:10},35:{_w:17,w:21,h:21,l:92,t:46,x:1,y:21,lb:10},36:{_w:17,w:21,h:21,l:115,t:46,x:1,y:21,lb:10}}};this.favTime=""}MapSign.inherits(Fe.BaseClass,"MapSign");Fe.extend(MapSign.prototype,{createMark:function(j){var m,l,a,b,c,g,f,e=_gl.config.iw.index;j=j||window.event;j=BMap.OperationMask.getDrawPoint(j,true);m=_gl.config.iw.title;l=_gl.config.iw.content;a=_gl.config.iw.cityCode;b=_gl.config.iw.fav;save=_gl.config.iw.save;g=_gl.config.iw.show;f=_gl.temp.cur.index;var h=_gl.config.cur[f],d=[h.x,h.y];c=_gl.createIcon();c.offset=new BMap.Size(d[0],d[1]);c=new BMap.Marker(j,{enableMassClear:false,icon:c});var k=null;c.addEventListener("click",function(){_gl.openInfoWnd(this,e,{type:"marker"})});c.addEventListener("mouseover",function(){this.setTop(true,270000000);k=setTimeout(function(){hoverListFrom("iw",e)},300)});c.addEventListener("mouseout",function(){this.setTop(true,260000000);outListFrom("iw",e);clearTimeout(k)});c.addEventListener("dragend",function(){var n=this.getPoint().lng+"|"+this.getPoint().lat;if(_sign.mapSign.pointInfo.list[e].point!=n){_sign.mapSign.pointInfo.list[e].point=n}});c.enableDragging(true);h=new BMap.Label(m,{offset:new BMap.Size(h._w-h.x+3,-20)});c.setLabel(h);var i=null;h.addEventListener("mouseover",function(){_gl.poiMarker[e].setTop(true,270000000);i=setTimeout(function(){hoverListFrom("iw",e)},300)});h.addEventListener("mouseout",function(){_gl.poiMarker[e].setTop(true,260000000);outListFrom("iw",e);clearTimeout(i)});h.addEventListener("click",function(){_gl.openInfoWnd(_gl.poiMarker[e],e,{type:"marker"})});map.addOverlay(c);h.setStyle({borderColor:"#808080",color:"#333",cursor:"pointer"});c.setTitle("\u53ef\u79fb\u52a8\u6539\u53d8\u4f4d\u7f6e");if(!_sign.mapSign.pointInfo.list[e]){_sign.mapSign.pointInfo.list[e]={marker:c,point:j.lng+"|"+j.lat,title:m,_title:m,content:l,_content:l,cityCode:a,fav:b,save:save,show:g,cur:f,_cur:f};_gl.poiMarker[e]=c}_gl.temp.iw.index=e;_gl.temp.iw.pre=e;_gl.config.iw.index++;_gl.config.iw.toal++;return c},createInfoWnd:function(c,b){var a=createSearchInfoWnd(c,b);a.addEventListener("open",function(){var d=_gl.temp.iw.index,e=_sign.mapSign.pointInfo.list[d];_gl.temp.iw.pre=d;_gl.temp.iw.hashCode=e.marker.hashCode;e.marker.getLabel().hide()});a.addEventListener("close",function(){var d=_gl.temp.iw.pre,e=_sign.mapSign.pointInfo.list[d],f=formatTitle(e.title);baidu.G("iwSaveTip"+d);_gl.temp.iw.hashCode=null;e.show=0;d=_gl.poiMarker[d].getLabel();var h=_gl.config.cur[_gl.temp.cur.index];d.setStyle({left:h._w-h.x+3+"px"});if(!e.curChange&&!e.titleChange&&!e.contentChange){d.setContent(f);d.setTitle(f);d.setStyle({color:""})}d.show()});return _gl.temp.iw._iw=a},openInfoWnd:function(b,d){baidu.G("iwFormName_"+d).blur();baidu.G("iwFormContent_"+d).blur();var c=_sign.mapSign.pointInfo.list[d];if(!b){b=c.marker}if(!(_gl.temp.iw&&_gl.temp.iw.hashCode==b.hashCode)){editSignList("iw",d,{type:"map"});_gl.temp.iw.index=d;c.show=1;var e=c.point.split("|")[0],a=c.point.split("|")[1];c=_gl.createInfoWnd({userSign:1,title:c._title,content:c._content,index:d,fav:c.fav},{cityCode:c.cityCode,x:e,y:a});b.openInfoWindow(c)}},deletePoint:function(a){map.removeOverlay(_sign.mapSign.pointInfo.list[a].marker);_gl.config.iw.toal--;delete _sign.mapSign.pointInfo.list[a];delete _gl.poiMarker[a];(a=baidu.G("iwListCon"+a))&&baidu.G("signPointList").removeChild(a)},createIcon:function(){var a=_gl.config.cur[_gl.temp.cur.index];a=new BMap.Icon("http://api.map.baidu.com/lbsapi/creatmap/images/us_mk_icon.png",new BMap.Size(a.w,a.h),{imageOffset:new BMap.Size(-a.l,-a.t),infoWindowOffset:new BMap.Size(a.lb+5,1)});return _gl.temp.icon=a},showCurLab:function(){var c;if(!_gl.temp.cur.label){c=_gl.temp.cur.label=new BMap.Marker(map.getCenter(),new BMap.Icon("images/us_cursor.gif"));c.setTop(true,280000000)}c=_gl.temp.cur.label;var b=_gl.config.cur[_gl.temp.cur.index];c.isVisible()||map.addOverlay(c);var a=_gl.createIcon();b=[b.x,b.y];a.offset=new BMap.Size(b[0],b[1]);c.setIcon(a);c.hide();a=function(d){d=window.event||d;if((d.target||d.srcElement)!=BMap.OperationMask.getDom(map)){c.hide()}else{c.show();d=BMap.OperationMask.getDrawPoint(d,true);c.setPoint(d)}};b=function(d){d=window.event||d;(d.target||d.srcElement).getAttribute("userTagPanl")};Fe.on(document,"mousemove",a);Fe.on(document,"click",b);_gl.temp.event.showCurLab.push({elem:document,type:"mousemove",func:a},{elem:document,type:"click",func:b})},exitShowCurLab:function(){var a=_gl.temp.event.showCurLab;_gl.temp.cur&&_gl.temp.cur.label&&_gl.temp.cur.label.hide();if(a&&a.length>0){for(var c=0;c<a.length;c++){Fe.un(a[c].elem,a[c].type,a[c].func)}}_gl.temp.event.showCurLab=[]},setCurLab:function(b){var d=_sign.mapSign.pointInfo.list[_gl.temp.iw.index];_gl.temp.cur.index=b;var c=_gl.config.cur[b],e=_gl.createIcon();c=[c.x,c.y];var a=d.marker.getLabel();e.offset=new BMap.Size(c[0],c[1]);d.marker.setIcon(e);c=_gl.config.cur[b];a.setStyle({left:c._w-c.x+3+"px"})},showTipInfo:function(c,b){var a=baidu.G(c);a.innerHTML=b;a.style.display="";(function(){_gl.favTime=setTimeout(function(){a.style.display="none"},1500)})()},transformArea:function(c){var b=RegExp("\n","g"),a=RegExp(" ","g");return c.replace(RegExp("\r\n","g"),"<br/>").replace(b,"<br/>").replace(a,"&nbsp;")},deTransformArea:function(a){var c=RegExp("&nbsp;","g");return a.replace(RegExp("<br/>","g"),"\n").replace(c," ")},createLabel:function(b){var d;b=b||window.event;var c=_gl.config.lb.index;d=BMap.OperationMask.getDrawPoint(b,true);b=_gl.config.lb.content;var e=new BMap.Label("",{offset:new BMap.Size(3,-7),point:d,enableMassClear:false}),a=null;e.addEventListener("click",function(){editSignList("lb",c)});e.addEventListener("mouseover",function(){this.setStyle({zIndex:"100"});a=setTimeout(function(){hoverListFrom("lb",c)},300)});e.addEventListener("mouseout",function(){this.setStyle({zIndex:"100"});outListFrom("lb",c);clearTimeout(a)});e.setContent("<div style='padding:2px;'>"+b+"</div>");map.addOverlay(e);e.setStyle({border:"1px solid #999"});_sign.mapSign.remarkInfo.list[_gl.config.lb.index]={point:d.lng+"|"+d.lat,content:b,_content:b,type:0};_gl.config.lb.label[_gl.config.lb.index]={label:e};_gl.config.lb.index++;_gl.config.lb.toal++},delRemark:function(c){var b=_gl.config.lb.label[c].label,a=baidu.G("lbListCon"+c);map.removeOverlay(b);delete _sign.mapSign.remarkInfo.list[c];baidu.G("signRemarkList").removeChild(a);_gl.config.lb.toal--}});function createSearchInfoWnd(c){var b=c.title;c=c.content;var a="<p class='iw_poi_title' title='"+b+"' id='SignIWTitle'>";a+=b;a+="</p>";return new BMap.InfoWindow('<div class="iw_poi_content" id="SignIWContent">'+c+"</div>",{title:a,height:0,margin:[10,10,20,10]})}var us_mapSign=new MapSign,us_sign=new Sign;function addSignList(b,d,c,e,a){baidu.G("sign"+e+"NoListTip").style.display="none";baidu.G(b).innerHTML+=d;baidu.G("sign"+e+"SaveTip").style.display="";b=_gl.temp[e].previous;b!=null&&hideListFrom(e,b);_gl.temp[e].previous=a;showSignListCon(e,a)}function removeSignList(c,b){var a=baidu.G(c+"ListCon"+b);if(c=="iw"){_gl.deletePoint(b)}else{if(c=="pl"){baidu.G("signPolylineList").removeChild(a);delPolyLine(b)}else{c=="lb"&&_gl.delRemark(b)}}if(_gl.config[c].toal<1){baidu.G("sign"+c+"SaveTip").style.display="none";baidu.G("sign"+c+"NoListTip").style.display=""}}function editSignList(b,d,c){var e=_gl.temp[b].previous,a=_sign.mapSign.pointInfo.list[d];_gl.temp[b].index=d;c=c&&c.type||"list";d!=e&&hideListFrom(b,e);showListFrom(b,d);showSignListCon(b,d);_gl.temp[b].previous=d;b=="iw"&&c=="list"&&_gl.openInfoWnd(a.marker,d,{type:"marker"})}function showSignListCon(c,b){var a=getEditHtml(c,b);baidu.G(c+"List"+b).innerHTML=a;if(c=="pl"){a=_sign.mapSign.polylineInfo.list[b];baidu.G("plStyleWeight"+b).value=a._weight;baidu.G("plStyleColor"+b).value=a._color;baidu.G("plStyleOpacity"+b).value=a._opacity}}function goPtIcon(a){var c=getPosition(baidu.G("sign_content_1")).top;a=getPosition(a).top;baidu.G("pointIconCon").style.top=a-c+"px"}function exitPtIcon(){baidu.G("pointIconCon").style.top="-1000px"}function setPtIcon(a){var c=_gl.temp.iw.index,b=_sign.mapSign.pointInfo.list[c],d=b.marker.getLabel();exitPtIcon();baidu.G("iwFormIcon_"+c).className="sp_s sp_"+a;_gl.setCurLab(a);b._cur=a;if(a!=b.cur){b.curChange=1;baidu.G("iwSaveTip"+c).style.display="";d.setContent("\u672a\u4fdd\u5b58");d.setStyle({color:"#f00"})}else{b.curChange=0;baidu.G("iwSaveTip"+c).style.display="none";if(!b.curChange&&!b.titleChange&&!b.contentChange){baidu.G("iwSaveTip"+c).style.display="none";d.setContent(b.title);d.setStyle({color:""})}}}function hideListFrom(a,c){if(baidu.G(a+"List"+c)){baidu.G(a+"ListCon"+c).className="";baidu.G(a+"Edit"+c).style.display="";baidu.G(a+"List"+c).style.display="none";a=="iw"&&exitPtIcon()}}function showListFrom(a,c){hideListFrom(a,_gl.temp[a].previous);if(baidu.G(a+"List"+c)){baidu.G(a+"ListCon"+c).className="signLihover";showSignListCon(a,c);baidu.G(a+"Edit"+c).style.display="none";baidu.G(a+"List"+c).style.display=""}_gl.temp[a].previous=c}function hoverListFrom(a,c){if(c!=_gl.temp[a].index){if(baidu.G(a+"List"+c)){baidu.G(a+"ListCon"+c).className="signLihover"}}}function outListFrom(a,c){if(c!=_gl.temp[a].index){if(baidu.G(a+"List"+c)){baidu.G(a+"ListCon"+c).className=""}}}function getEditHtml(c,b){var a;switch(c){case"iw":a=_sign.mapSign.pointInfo.list[b];a='<ul class="wxp_lis_2">\t\t\t\t\t\t<li class="li_hei1"><span class="wxp_nav_4">\u6807\u8bb0\u56fe\u6807\uff1a</span><span class="wxp_img_con1" onclick="goPtIcon(this)"><img class="sp_s sp_'+a._cur+'" id="iwFormIcon_'+b+'" src="images/transparent.gif"></span>\t\t\t\t\t\t</li>\t\t\t\t\t\t<li><span class="wxp_nav_4">\u540d\u3000\u79f0\uff1a</span><input type="text" value="'+a._title+'" id="iwFormName_'+b+'" class="ptInput1" onfocus="updateIwInfo(this,\'title\','+b+")\" onblur=\"delIwInfoUdT(this,'title',"+b+')" /></li>\t\t\t\t\t\t<li class="hei2"><span class="wxp_nav_4">\u5907\u3000\u6ce8\uff1a</span><textarea class="ptInput2" id="iwFormContent_'+b+"\" onfocus=\"updateIwInfo(this,'content',"+b+")\" onblur=\"delIwInfoUdT(this,'content',"+b+')" >'+_gl.deTransformArea(a._content)+'</textarea></li>\t\t\t\t\t</ul>\t\t\t\t\t<div class="wxp_con_3" style="margin-top:7px;"><input type="button" value="\u4fdd\u3000\u5b58" onclick="submitSignList(\'iw\','+b+')"><input type="button" value="\u53d6\u3000\u6d88" onclick="cancelSignList(\'iw\','+b+')"></div>';break;case"pl":a='<ul class="wxp_lis_2">\t\t\t\t\t\t<li><span class="wxp_nav_4">\u5bbd\u3000\u5ea6\uff1a</span><select onchange="plStyleSet(this,'+b+",'Weight')\" id=\"plStyleWeight"+b+'"><option value="2">\u6700\u7ec6</option><option value="3">\u8f83\u7ec6</option><option value="4">\u4e2d\u7b49</option><option value="5">\u8f83\u7c97</option><option value="6">\u6700\u7c97</option></select>\t\t\t\t\t\t</li>\t\t\t\t\t\t<li><span class="wxp_nav_4">\u989c\u3000\u8272\uff1a</span><select onchange="plStyleSet(this,'+b+",'Color')\" id=\"plStyleColor"+b+'"><option value="#f00">\u7ea2\u8272</option><option value="#f0f">\u7d2b\u8272</option><option value="#0ff">\u9752\u8272</option><option value="#000">\u9ed1\u8272</option><option value="#00f">\u84dd\u8272</option><option value="#0f0">\u7eff\u8272</option></select></li>\t\t\t\t\t\t<li><span class="wxp_nav_4">\u900f\u660e\u5ea6\uff1a</span><select onchange="plStyleSet(this,'+b+",'Opacity')\" id=\"plStyleOpacity"+b+'"><option value="1">\u4e0d\u900f\u660e</option><option value="0.4">\u9ad8\u900f\u660e</option><option value="0.8">\u4f4e\u900f\u660e</option><option value="0.6">\u4e2d\u7b49</option></select></li>\t\t\t\t\t\t<li><label for="psStyleSet'+b+'"><span style="float:left">\u4fdd\u5b58\u4e3a\u9ed8\u8ba4\u503c</span><input type="checkbox" id="psStyleSet'+b+'" onfocus="this.blur()" /></label></li>\t\t\t\t\t</ul>\t\t\t\t\t<div class="wxp_con_3"><input type="button" value="\u4fdd\u3000\u5b58" onclick="submitSignList(\'pl\','+b+')"><input type="button" value="\u53d6\u3000\u6d88" onclick="cancelSignList(\'pl\','+b+')"></div>';break;case"lb":a=_sign.mapSign.remarkInfo.list[b];a='<ul class="wxp_lis_2">\t\t\t\t\t\t<li class="hei3"><span class="wxp_nav_4">\u5185\u3000\u5bb9\uff1a</span><textarea class="ptInput2" id="lbFormContent_'+b+'" onfocus="updateLbInfo(this,'+b+')" onblur="delLbInfoUdT(this,'+b+')">'+_gl.deTransformArea(a._content)+'</textarea></li>\t\t\t\t\t</ul>\t\t\t\t\t<div class="wxp_con_3"><input type="button" value="\u4fdd\u3000\u5b58" onclick="submitSignList(\'lb\','+b+')"><input type="button" value="\u53d6\u3000\u6d88" onclick="cancelSignList(\'lb\','+b+')"></div>';break;default:a=""}return a}function submitSignList(a,c){if(a=="iw"){submitIwInfo(a,c)}else{if(a=="pl"){var b=_sign.mapSign.polylineInfo.list[c];b.weight=b._weight;b.color=b._color;b.opacity=b._opacity;if(baidu.G("psStyleSet"+c).checked){var d=_gl.config.pl;d.weight=b._weight*1;d.color=b._color;d.opacity=b._opacity*1}}else{a=="lb"&&updateRemarkInfo(a,c)}}baidu.G(a+"SaveTip"+c).style.display="none";hideListFrom(a,c)}function cancelSignList(a,c){hideListFrom(a,c);if(a=="iw"){var b=_sign.mapSign.pointInfo.list[c];b.marker.closeInfoWindow();b._title=b.title;b._content=b.content;b._cur=b.cur;var d=b.marker.getLabel();d.setContent(b._title);d.setStyle({color:""})}else{if(a=="pl"){b=_sign.mapSign.polylineInfo.list[c];b.polyobj.setStrokeWeight(b.weight);b.polyobj.setStrokeColor(b.color);b.polyobj.setStrokeOpacity(b.opacity);b._weight=b.weight;b._color=b.color;b._opacity=b.opacity}}if(baidu.G(a+"SaveTip"+c)){baidu.G(a+"SaveTip"+c).style.display="none"}}function updateRemarkInfo(c,b){var a=_sign.mapSign.remarkInfo.list[b];a.content=a._content;_gl.config.lb.label[b].label.setContent("<div style='padding:2px;'>"+a.content+"</div>")}function changeRemarkInfo(){}function plStyleSet(b,d,c){var e=_sign.mapSign.polylineInfo.list[d],a=c.toLowerCase();e.polyobj["setStroke"+c](b.value);e["_"+a]=b.value;baidu.G("plSaveTip"+d).style.display="";_gl.temp.pl.change=1}function delPolyLine(a){map.removeOverlay(_sign.mapSign.polylineInfo.list[a].polyobj);delete _sign.mapSign.polylineInfo.list[a];_gl.config.pl.toal--}function getInputValue(a,c,b){a=a.value;a=a.replace(/^\s*|\s*$/g,"").replace(/<script>|<\/script>/g,"");var d=a=_gl.transformArea(a);(d=d.replace(/<.*?>|<\/.*?>/g,""))||(a=_gl.config[c][b]);return a}function formatTitle(a){a=a.replace(/^\s*|\s*$/g,"").replace(/<.*?>|<\/.*?>/g,"");if(a.length>11){a=a.substring(0,10)+"..."}return a}function updateIwInfo(c,e,d){var f=_sign.mapSign.pointInfo.list[d],a=f[e],b=f.marker.getLabel();temp.IWtimer=setInterval(function(){var g=getInputValue(c,"iw",e);f["_"+e]=g;if(g!=a){f.marker.closeInfoWindow();b.setContent("\u672a\u4fdd\u5b58");b.setStyle({color:"#f00"});f[e+"Change"]=1;baidu.G("iwSaveTip"+d).style.display=""}else{f[e+"Change"]=0;if(!f.curChange&&!f.titleChange&&!f.contentChange){baidu.G("iwSaveTip"+d).style.display="none";b.setContent(f.title);b.setStyle({color:""})}}},200)}function delIwInfoUdT(c,b,a){c=getInputValue(c,"iw",b);_sign.mapSign.pointInfo.list[a]["_"+b]=c;clearInterval(temp.IWtimer)}function submitIwInfo(b,d){var c=_sign.mapSign.pointInfo.list[d],e=c.marker.getLabel(),a=formatTitle(c._title);c.title=c._title;c.content=c._content;c.cur=c._cur;e.setContent(a);e.setStyle({color:""});c.titleChange=0;c.contentChange=0;c.curChange=0;baidu.G(b+"FormTitle_"+d).innerHTML=a}function updateLbInfo(a,c){var b=_sign.mapSign.remarkInfo.list[c],d=b.content;temp.LBtimer=setInterval(function(){var e=getInputValue(a,"lb","content");b._content=e;_gl.config.lb.label[c].label.setContent("<div style='padding:2px;'>"+e+"</div>");if(e!=d){b.contentChange=1;baidu.G("lbSaveTip"+c).style.display=""}else{b.contentChange=0;baidu.G("lbSaveTip"+c).style.display="none"}},200)}function delLbInfoUdT(c,b){var a=getInputValue(c,"lb","content");_sign.mapSign.remarkInfo.list[b]._content=a;clearInterval(temp.LBtimer)}function ApiKeyFocus(){baidu.G("APIKEYMessage").style.display="none";baidu.G("APIKEYMessage").innerHTML="\u8bf7\u8f93\u5165\u767e\u5ea6\u5730\u56feAPI\u5bc6\u94a5"}function gotoBestMap(a,c){var b=userConfig.map,d;if(a=="pl"){d=_sign.mapSign.polylineInfo.list[c];d=d.polyobj.getPoints()}else{if(a=="lb"){d=_sign.mapSign.remarkInfo.list[c];d=d.point.split("|");d=[new BMap.Point(d[0],d[1])]}}b=b.level-map.getViewport(d).zoom;map.setViewport(d,{zoomFactor:b})}function getSignCode(g){var j=userConfig.map,h=userConfig.event,k=userConfig.control,a=_ctrl_ove=_ctrl_sca="";if(k.nav.self){a="//\u5411\u5730\u56fe\u4e2d\u6dfb\u52a0\u7f29\u653e\u63a7\u4ef6\n\tvar ctrl_nav = new BMap.NavigationControl({anchor:BMAP_ANCHOR_"+k.nav.place+",type:BMAP_NAVIGATION_CONTROL_"+k.nav.style+"});\n\tmap.addControl(ctrl_nav);\n"}if(k.ove.self){_ctrl_ove="//\u5411\u5730\u56fe\u4e2d\u6dfb\u52a0\u7f29\u7565\u56fe\u63a7\u4ef6\n\tvar ctrl_ove = new BMap.OverviewMapControl({anchor:BMAP_ANCHOR_"+k.ove.place+",isOpen:"+k.ove.style+"});\n\tmap.addControl(ctrl_ove);\n"}if(k.sca.self){var b="";if(k.sca.style=="IMPERIAL"){b="ctrl_sca.setUnit(BMAP_UNIT_IMPERIAL)\n"}_ctrl_sca="//\u5411\u5730\u56fe\u4e2d\u6dfb\u52a0\u6bd4\u4f8b\u5c3a\u63a7\u4ef6\n\tvar ctrl_sca = new BMap.ScaleControl({anchor:BMAP_ANCHOR_"+k.sca.place+"});\n\tmap.addControl(ctrl_sca);\n    "+b}k=_event_scr=_event_dou=_event_key="";k=h.dra?"map.enableDragging();//\u542f\u7528\u5730\u56fe\u62d6\u62fd\u4e8b\u4ef6\uff0c\u9ed8\u8ba4\u542f\u7528(\u53ef\u4e0d\u5199)\n":"map.disableDragging();//\u7981\u7528\u5730\u56fe\u62d6\u62fd\u4e8b\u4ef6\n";_event_scr=h.scr?"map.enableScrollWheelZoom();//\u542f\u7528\u5730\u56fe\u6eda\u8f6e\u653e\u5927\u7f29\u5c0f\n":"map.disableScrollWheelZoom();//\u7981\u7528\u5730\u56fe\u6eda\u8f6e\u653e\u5927\u7f29\u5c0f\uff0c\u9ed8\u8ba4\u7981\u7528(\u53ef\u4e0d\u5199)\n";_event_dou=h.dou?"map.enableDoubleClickZoom();//\u542f\u7528\u9f20\u6807\u53cc\u51fb\u653e\u5927\uff0c\u9ed8\u8ba4\u542f\u7528(\u53ef\u4e0d\u5199)\n":"map.disableDoubleClickZoom();//\u7981\u7528\u9f20\u6807\u53cc\u51fb\u653e\u5927\n";_event_key=h.key?"map.enableKeyboard();//\u542f\u7528\u952e\u76d8\u4e0a\u4e0b\u5de6\u53f3\u952e\u79fb\u52a8\u5730\u56fe\n":"map.disableKeyboard();//\u7981\u7528\u952e\u76d8\u4e0a\u4e0b\u5de6\u53f3\u952e\u79fb\u52a8\u5730\u56fe\uff0c\u9ed8\u8ba4\u7981\u7528(\u53ef\u4e0d\u5199)\n";h=_sign_point=_sign_line=_sign_text="";b=_sign.mapSign;if(!_sign.isNull(b.pointInfo.list)){var e=[],d;for(d in b.pointInfo.list){var c=b.pointInfo.list[d],f=_gl.config.cur[c.cur];e.push('{title:"'+c.title+'",content:"'+c.content+'",point:"'+c.point+'",isOpen:'+c.show+",icon:{w:"+f.w+",h:"+f.h+",l:"+f.l+",t:"+f.t+",x:"+f.x+",lb:"+f.lb+"}}\n\t\t ")}_sign_point="    //\u6807\u6ce8\u70b9\u6570\u7ec4\n    var markerArr = ["+e+'];\n    //\u521b\u5efamarker\n    function addMarker(){\n        for(var i=0;i<markerArr.length;i++){\n            var json = markerArr[i];\n            var p0 = json.point.split("|")[0];\n            var p1 = json.point.split("|")[1];\n            var point = new BMap.Point(p0,p1);\n\t\t\tvar iconImg = createIcon(json.icon);\n            var marker = new BMap.Marker(point,{icon:iconImg});\n\t\t\tvar iw = createInfoWindow(i);\n\t\t\tvar label = new BMap.Label(json.title,{"offset":new BMap.Size(json.icon.lb-json.icon.x+10,-20)});\n\t\t\tmarker.setLabel(label);\n            map.addOverlay(marker);\n            label.setStyle({\n                        borderColor:"#808080",\n                        color:"#333",\n                        cursor:"pointer"\n            });\n\t\t\t\n\t\t\t(function(){\n\t\t\t\tvar index = i;\n\t\t\t\tvar _iw = createInfoWindow(i);\n\t\t\t\tvar _marker = marker;\n\t\t\t\t_marker.addEventListener("click",function(){\n\t\t\t\t    this.openInfoWindow(_iw);\n\t\t\t    });\n\t\t\t    _iw.addEventListener("open",function(){\n\t\t\t\t    _marker.getLabel().hide();\n\t\t\t    })\n\t\t\t    _iw.addEventListener("close",function(){\n\t\t\t\t    _marker.getLabel().show();\n\t\t\t    })\n\t\t\t\tlabel.addEventListener("click",function(){\n\t\t\t\t    _marker.openInfoWindow(_iw);\n\t\t\t    })\n\t\t\t\tif(!!json.isOpen){\n\t\t\t\t\tlabel.hide();\n\t\t\t\t\t_marker.openInfoWindow(_iw);\n\t\t\t\t}\n\t\t\t})()\n        }\n    }\n    //\u521b\u5efaInfoWindow\n    function createInfoWindow(i){\n        var json = markerArr[i];\n        var iw = new BMap.InfoWindow("<b class=\'iw_poi_title\' title=\'" + json.title + "\'>" + json.title + "</b><div class=\'iw_poi_content\'>"+json.content+"</div>");\n        return iw;\n    }\n    //\u521b\u5efa\u4e00\u4e2aIcon\n    function createIcon(json){\n        var icon = new BMap.Icon("http://app.baidu.com/map/images/us_mk_icon.png", new BMap.Size(json.w,json.h),{imageOffset: new BMap.Size(-json.l,-json.t),infoWindowOffset:new BMap.Size(json.lb+5,1),offset:new BMap.Size(json.x,json.h)})\n        return icon;\n    }\n';h+="        addMarker();//\u5411\u5730\u56fe\u4e2d\u6dfb\u52a0marker\n"}if(!_sign.isNull(b.polylineInfo.list)){e=[];for(d in b.polylineInfo.list){c=b.polylineInfo.list[d];e.push('{style:"'+c.style+'",weight:'+c.weight+',color:"'+c.color+'",opacity:'+c.opacity+",points:["+c.arr+"]}\n\t\t ")}_sign_line="//\u6807\u6ce8\u7ebf\u6570\u7ec4\n    var plPoints = ["+e+'];\n    //\u5411\u5730\u56fe\u4e2d\u6dfb\u52a0\u7ebf\u51fd\u6570\n    function addPolyline(){\n\t\tfor(var i=0;i<plPoints.length;i++){\n\t\t\tvar json = plPoints[i];\n\t\t\tvar points = [];\n\t\t\tfor(var j=0;j<json.points.length;j++){\n\t\t\t\tvar p1 = json.points[j].split("|")[0];\n\t\t\t\tvar p2 = json.points[j].split("|")[1];\n\t\t\t\tpoints.push(new BMap.Point(p1,p2));\n\t\t\t}\n\t\t\tvar line = new BMap.Polyline(points,{strokeStyle:json.style,strokeWeight:json.weight,strokeColor:json.color,strokeOpacity:json.opacity});\n\t\t\tmap.addOverlay(line);\n\t\t}\n\t}\n';h+="        addPolyline();//\u5411\u5730\u56fe\u4e2d\u6dfb\u52a0\u7ebf\n"}if(!_sign.isNull(b.remarkInfo.list)){e=[];for(d in b.remarkInfo.list){c=b.remarkInfo.list[d];e.push('{point:"'+c.point+'",content:"'+c.content+'"}\n\t\t ')}_sign_text="//\u6587\u5b57\u6807\u6ce8\u6570\u7ec4\n    var lbPoints = ["+e+'];\n    //\u5411\u5730\u56fe\u4e2d\u6dfb\u52a0\u6587\u5b57\u6807\u6ce8\u51fd\u6570\n    function addRemark(){\n        for(var i=0;i<lbPoints.length;i++){\n            var json = lbPoints[i];\n            var p1 = json.point.split("|")[0];\n            var p2 = json.point.split("|")[1];\n            var label = new BMap.Label("<div style=\'padding:2px;\'>"+json.content+"</div>",{point:new BMap.Point(p1,p2),offset:new BMap.Size(3,-6)});\n            map.addOverlay(label);\n            label.setStyle({borderColor:"#999"});\n        }\n    }\n';h+="        addRemark();//\u5411\u5730\u56fe\u4e2d\u6dfb\u52a0\u6587\u5b57\u6807\u6ce8\n"}d=j.key;if(g&&g=="preview"){d=mapConfig.map.key}return'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml">\n<head>\n<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />\n<title>\u767e\u5ea6\u5730\u56feAPI\u81ea\u5b9a\u4e49\u5730\u56fe</title>\n<!--\u5f15\u7528\u767e\u5ea6\u5730\u56feAPI-->\n<style type="text/css">\n    html,body{margin:0;padding:0;}\n    .iw_poi_title {color:#CC5522;font-size:14px;font-weight:bold;overflow:hidden;padding-right:13px;white-space:nowrap}\n    .iw_poi_content {font:12px arial,sans-serif;overflow:visible;padding-top:4px;white-space:-moz-pre-wrap;word-wrap:break-word}\n</style>\n<script type="text/javascript" src="http://api.map.baidu.com/api?key='+d+'&v=1.1&services=true"><\/script>\n</head>\n\n<body>\n  <!--\u767e\u5ea6\u5730\u56fe\u5bb9\u5668-->\n  <div style="width:'+j.width+"px;height:"+j.height+'px;border:#ccc solid 1px;" id="dituContent"></div>\n</body>\n<script type="text/javascript">\n    //\u521b\u5efa\u548c\u521d\u59cb\u5316\u5730\u56fe\u51fd\u6570\uff1a\n    function initMap(){\n        createMap();//\u521b\u5efa\u5730\u56fe\n        setMapEvent();//\u8bbe\u7f6e\u5730\u56fe\u4e8b\u4ef6\n        addMapControl();//\u5411\u5730\u56fe\u6dfb\u52a0\u63a7\u4ef6\n'+h+'    }\n    \n    //\u521b\u5efa\u5730\u56fe\u51fd\u6570\uff1a\n    function createMap(){\n        var map = new BMap.Map("dituContent");//\u5728\u767e\u5ea6\u5730\u56fe\u5bb9\u5668\u4e2d\u521b\u5efa\u4e00\u4e2a\u5730\u56fe\n        var point = new BMap.Point('+j.center.x+","+j.center.y+");//\u5b9a\u4e49\u4e00\u4e2a\u4e2d\u5fc3\u70b9\u5750\u6807\n        map.centerAndZoom(point,"+j.level+");//\u8bbe\u5b9a\u5730\u56fe\u7684\u4e2d\u5fc3\u70b9\u548c\u5750\u6807\u5e76\u5c06\u5730\u56fe\u663e\u793a\u5728\u5730\u56fe\u5bb9\u5668\u4e2d\n        window.map = map;//\u5c06map\u53d8\u91cf\u5b58\u50a8\u5728\u5168\u5c40\n    }\n    \n    //\u5730\u56fe\u4e8b\u4ef6\u8bbe\u7f6e\u51fd\u6570\uff1a\n    function setMapEvent(){\n        "+k+"        "+_event_scr+"        "+_event_dou+"        "+_event_key+"    }\n    \n    //\u5730\u56fe\u63a7\u4ef6\u6dfb\u52a0\u51fd\u6570\uff1a\n    function addMapControl(){\n        "+a+"        "+_ctrl_ove+"        "+_ctrl_sca+"}\n    \n"+_sign_point+""+_sign_line+""+_sign_text+"    \n    initMap();//\u521b\u5efa\u548c\u521d\u59cb\u5316\u5730\u56fe\n<\/script>\n</html>"}

function showSignCode(){
	var a=getSignCode();
	baidu.G("bareasign").value=a;
	if(a=getScrollTop()){
		baidu.G("Layer1").style.top=a+"px"
	}
	baidu.G("Layer1").style.display="";
	a=getAbsPoint(baidu.G("copy_code"));
	M.fe.copy({
		copyBtnId:"copy_code",copytextId:"bareasign",copyTag:"value",callback:function(){
			var b=baidu.dom.g("su_sign");
			b.style.display="inline";
			setTimeout(function(){
				b.style.display="none"
			},1000)
		}
	});
	baidu.dom.getParent(baidu.dom.g("ZeroClipboardMovie_1")).style.top=a.y+"px";
	baidu.dom.getParent(baidu.dom.g("ZeroClipboardMovie_1")).style.left=a.x+"px";
	baidu.dom.getParent(baidu.dom.g("ZeroClipboardMovie_1")).style.zIndex=30000
}

function closeSignCodeDom(){baidu.G("signCodeCon").style.display="none"}function signPreview(){var a=getSignCode("preview"),c=window.open("","_blank","");c.document.open("text/html","replace");c.document.write(a);document.all&&c.document.execCommand("Refresh");c.document.close()}document.all&&Fe.on(window,"load",function(){var c=mapConfig.control,b=[{value:c.nav.place,cl_type:"nav"},{value:c.ove.place,cl_type:"ove"},{value:c.sca.place,cl_type:"sca"}];c=[{value:c.nav.style,cl_type:"nav"},{value:c.sca.style,cl_type:"sca"}];for(var a=0;a<b.length;a++){changeCtrlPlace(b[a])}for(a=0;a<c.length;a++){changeNavStyle(c[a])}});function CreateFlash(c,e,d,f,a){var b='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,0,0" width="'+d+'" height="'+f+'" id="'+c+'" align="middle">';b+='<param name="allowScriptAccess" value="always">';b+='<param name="quality" value="high">';b+='<param name="movie" value="'+e+'">';b+='<param name="flashvars" value="'+a+'">';b+='<embed src="'+e+'" flashvars="'+a+'" quality="high" width="'+d+'" height="'+f+'" name="'+c+'" align="middle" allowScriptAccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">';b+="</object>";return b}if(typeof HTMLElement!="undefined"&&!window.opera&&!HTMLElement.prototype.insertAdjacentHTML){HTMLElement.prototype.insertAdjacentHTML=function(c,b){var a=this.ownerDocument.createRange();a.setStartBefore(this);a=a.createContextualFragment(b);switch(c){case"beforeBegin":this.parentNode.insertBefore(a,this);break;case"afterBegin":this.insertBefore(a,this.firstChild);break;case"beforeEnd":this.appendChild(a);break;case"afterEnd":this.nextSibling?this.parentNode.insertBefore(a,this.nextSibling):this.parentNode.appendChild(a)}}}function beforeEndHTML(a,c){a.insertAdjacentHTML("beforeEnd",c);return a.lastChild}function setFlashClipContentsign(){var a=baidu.G("bareasign").value;if(baidu.G("su_sign")){baidu.G("su_sign").style.display="inline"}setTimeout(function(){if(baidu.G("su_sign")){baidu.G("su_sign").style.display="none"}},1000);return a}var _bapi={};_bapi.init=function(a,c,b){var d=baidu.G(a);a=a.split("_")[1];baidu.G("barea"+a);if(document.all){c==40?beforeEndHTML(d,'<input type="button" class="cen copy" style="border:1px solid #e3f2ff;cursor:pointer;line-height:'+b+'px" value="\u590d\u5236"/>'):beforeEndHTML(d,'<div class="bder_color t10" style="width:98px;height:34px;"><span id="copy_code" class="bder_color cen bg_h2 bold font_color font14" style="display:block;cursor:pointer;width:94px;height:30px;margin:1px;line-height:30px;vertical-align:middle;" class="t30">\u590d\u5236\u4ee3\u7801</span></div>')}else{beforeEndHTML(d,'<div class="bder_color t10" style="width:98px;height:34px;"><span id="copy_code" class="bder_color cen bg_h2 bold font_color font14" style="display:block;cursor:pointer;width:94px;height:30px;margin:1px;line-height:30px;vertical-align:middle;" class="t30">\u590d\u5236\u4ee3\u7801</span></div>')}};function getAbsPoint(c){for(var b=c.offsetLeft,a=c.offsetTop;c=c.offsetParent;){b+=c.offsetLeft;a+=c.offsetTop}return{x:b,y:a}};